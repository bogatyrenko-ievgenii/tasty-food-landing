{"version":3,"sources":["webpack:///./scripts/modules/tabs.js","webpack:///./scripts/services/service.js","webpack:///./scripts/modules/card.js","webpack:///./scripts/modules/orderItem.js","webpack:///./scripts/modules/popup.js","webpack:///./scripts/modules/offer.js"],"names":["window","addEventListener","tabs","document","querySelectorAll","content","tabsParent","querySelector","event","activeElem","trgt","num","forEach","element","i","getActiveItem","target","classList","remove","add","addActiveClass","URI","fetch","getData","ok","Error","status","json","getImages","name","fetchData","then","res","hits","catch","error","Card","image","className","title","this","orderItem","count","index","saveInLocal","item","createElement","innerHTML","addListener","id","amount","console","log","removeFromLocal","handleClick","shopping","JSON","parse","localStorage","getItem","newShopping","serializing","key","obj","serialized","stringify","setItem","Popup","createPopup","list","items","readFromLocal","isIn","append","render","childElementCount","parent","addListeners","popup","handleEvent","classes","contains","closeModal","removeChild","removeEventListener","showMessage","message","textContent","setTimeout","pos","multNum","requestAnimationFrame","animation","style","top","foodCategories","foodModificator","num2","num1","food","offer","getIncremNum","hit","card","largeImageURL","insertAdjacentHTML","err","order","parentElement","nodeName","preventDefault","onOrderBtn","dataset","product","firstElementChild"],"mappings":"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","file":"main.479c5b5e98c9d03a22ea.js","sourcesContent":["window.addEventListener('DOMContentLoaded', () => {\n\n    const tabs = document.querySelectorAll('.tabs__header-item');\n    const content = document.querySelectorAll('.tabs__content');\n    const tabsParent = document.querySelector('.tabs__header-items');\n\n\n    const removeActivClass = () => {\n\n        tabs.forEach(element => {\n            element.classList.remove('tabs__header-item-active')\n        });\n\n        content.forEach(element => {\n            element.classList.remove('tabs__content-active')\n        });\n    }\n\n    const getActiveItem = (trgt) => {\n        let num;\n        tabs.forEach((element, i) => {\n            if (element === trgt) {\n                num = i;\n                return;\n            }\n        })\n        return num;\n    }\n\n    const addActiveClass = (activeElem = 0) => {\n\n        tabs.forEach((element, i) => {\n            if (i === activeElem) {\n                element.classList.add('tabs__header-item-active')\n            }\n        });\n\n        content.forEach((element, i) => {\n            if (i === activeElem) {\n                element.classList.add('tabs__content-active')\n            }\n        });\n    }\n\n    tabsParent.addEventListener('click', (event) => {\n        let trgt = event.target;\n        let activeElem = getActiveItem(trgt);\n        removeActivClass();\n        addActiveClass(activeElem);\n    });\n\n\n})","import { APIKEY } from './apikey';\n\nexport let URI = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=4&key=${APIKEY}&q=`;\n\n\nasync function fetchData(URI) {\n  const getData = await fetch(URI);\n\n  if (!getData.ok) {\n    throw new Error(`Could not fetch. Status is - ${getData.status}.`);\n  }\n\n  return await getData.json();\n}\n\n\n\nexport const getImages = name => {\n\n  return fetchData(`${URI}${name}`)\n    .then(res => res.hits)\n    .catch(error => {\n      throw new Error(`Something went wrong because - ${error}`);\n    });\n\n};\n\n","export default class Card {\n\n    constructor(image, className, title) {\n        this.image = image;\n        this.className = className;\n        this.title = title;\n    }\n\n    render = () => {\n        return (\n            `<div class=\"${this.className}\">\n                <div class=\"${this.className}_wrapper\">\n                <img src=\"${this.image}\" class=\"${this.className}_img\" alt=\"beautiful image\">\n                <div class=\"${this.className}_descr\" data-product=\"${this.title}\">\n                    <h3>${this.title}</h3>\n                    <div class=\"${this.className}_text\">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam nihil reprehenderit aspernatur minima unde hic facere. Unde nulla deleniti placeat, aliquid dolorum voluptatum quo.</div>\n                    <button class=\"${this.className}_button\" type=\"submit\">Order</button>\n                </div>\n            </div>`\n        )\n    }\n}","\nexport default class orderItem {\n    constructor (name, count = 1, index) {\n        this.name = name;\n        this.count = count;\n        this.index = index\n    }\n\n    render = () => {\n        this.saveInLocal();\n        const item = document.createElement('li');\n        item.classList.add('popup__item');\n        item.innerHTML = `<span class=\"popup__item_name\">${this.name}</span>\n                        <div class=\"popup__operations\">\n                            <div id=\"decr\" class=\"popup__item_action\">-</div>\n                            <div class=\"popup__item_amount\">${this.count}</div>\n                            <div id=\"incr\" class=\"popup__item_action\">+</div>\n                            <div id=\"remove\" class=\"popup__item_action\">Remove</div>\n                        <div>`;\n        this.addListener(item);\n        return item;\n    }\n\n    handleClick = (event, item) => {\n        const id = event.target.id;\n        const amount = document.querySelectorAll('.popup__item_amount')[this.index];\n\n        console.log(this.index);\n\n        if (id === 'decr') {\n            if (this.count > 1) this.count -= 1;\n            amount.innerHTML = this.count;\n        } else if (id === 'incr') {\n            if (this.count < 99) this.count += 1;\n            amount.innerHTML = this.count;\n        } else if (id === 'remove') {\n            \n            this.removeFromLocal();\n            item.classList.add('popup__item_disabled');\n            return;\n        }\n\n        this.saveInLocal();\n    }\n\n    addListener = (item) => {\n        item.addEventListener('click', () => this.handleClick(event, item));\n    }\n\n\n    saveInLocal = () => {\n        const shopping = JSON.parse(localStorage.getItem('shopping'));\n        if(shopping === null) {\n            const newShopping = {[this.name] : this.count}\n            this.serializing(newShopping);\n        } else {\n            const newShopping = {...shopping, ...{[this.name] : this.count}}\n            this.serializing(newShopping)\n        }\n    }\n\n    removeFromLocal = () => {\n        const shopping = JSON.parse(localStorage.getItem('shopping'));\n        const newShopping = {...shopping};\n        for (let key in shopping) {\n            if (key === this.name) {\n                delete newShopping[this.name]\n            }\n        }\n        this.serializing(newShopping);\n    }\n    \n\n    serializing = (obj) => {\n        const serialized = JSON.stringify(obj);\n        localStorage.setItem('shopping', serialized);\n    }\n\n}\n","import orderItem from \"./orderItem\";\n\nexport default class Popup {\n    constructor(name) {\n        this.name = name;\n        this.parent = document.querySelector('body');\n        this.popup = null;\n        this.isIn = false;\n        this.index = 0;\n    }\n\n    render = () => {\n        this.createPopup();\n\n        const list = document.querySelector('.popup__list');\n\n        const items = this.readFromLocal();\n        for (let item in items) {\n            \n            if (item === this.name) {\n                this.isIn = true;\n            }\n            list.append(new orderItem(item, items[item], this.index).render());\n            this.index += 1;\n        }\n\n        if (!this.isIn) {\n            const item = new orderItem(this.name, 1, list.childElementCount).render();\n            list.append(item);\n        }\n\n    \n        this.parent.classList.add('popup__active');\n        this.addListeners();\n    };\n\n    createPopup = () => {\n        this.popup = document.createElement('div');\n        this.popup.classList.add('popup');\n        this.popup.innerHTML = `<div class=\"popup__wrapper\">\n                                <div class=\"popup__close\">&times;</div>\n                                <h3 class=\"popup__title\">Your order</h3>\n                                <ul class=\"popup__list\">\n                                </ul>\n                                <textarea class=\"popup__textarea\" name=\"alergen\" id=\"\" placeholder=\"Here you can leave some info about allergens or sth else.\" rows=\"3\"></textarea>\n                                </div>`;\n        this.parent.append(this.popup);\n    }\n\n    readFromLocal = () => {\n        return JSON.parse(localStorage.getItem('shopping'));\n    }\n\n    addListeners = () => {\n        document\n            .querySelector('.popup')\n            .addEventListener('click', this.handleEvent);\n\n        window.addEventListener('keydown', this.handleEvent);\n    };\n\n    handleEvent = event => {\n        const target = event.target;\n        const classes = target.classList;\n        if (\n            classes.contains('popup__close') ||\n            classes.contains('popup') ||\n            event.key === 'Escape'\n        ) {\n            this.closeModal();\n        }       \n    };\n\n    closeModal = () => {\n        this.parent.classList.remove('popup__active');\n        this.parent.removeChild(this.popup);\n        window.removeEventListener('keydown', this.handleEvent);\n        this.showMessage();\n    };\n\n    showMessage = () => {\n        const message = document.createElement('div');\n        message.classList.add('popup__message')\n        message.textContent = 'To complete your order, please, click on pizza ;-)';\n\n        this.parent.append(message)\n        setTimeout(() => {\n            message.remove();\n        }, 3000)\n        \n        let pos = 1;\n        let multNum = 1.2;\n\n        const animation = () => {\n            pos*=multNum;\n            message.style.top = pos + 'px';\n\n            if (pos < 100) {\n                requestAnimationFrame(animation)\n            } else {\n                pos -= 5;\n                multNum = 1.0015;\n                requestAnimationFrame(animation)\n            }\n        }\n\n        requestAnimationFrame(animation);\n    }\n}\n","\nimport { getImages } from '../services/service';\nimport Card from './card';\nimport Popup from './popup';\n\nconst foodCategories = ['pizza', 'burger', 'sushi'];\nconst foodModificator = ['roasted', 'fried', 'fresh', 'home made'];\n\nwindow.addEventListener('DOMContentLoaded', () => {\n    const food = document.querySelectorAll('.offer__food.wrapper');\n    // const drinks = document.querySelector('.offer__drinks');\n    const offer = document.querySelector('.offer');\n\n    const counter = num2 => {\n        let num1 = -1;\n        return () => {\n            if (num1 === 3) {\n                num1 = -1;\n            }\n            return (num1 += num2);\n        };\n    };\n\n    const getIncremNum = counter(1);\n    renderCards();\n\n    function renderCards () {\n        foodCategories.forEach((item, i) => {\n            getImages(item).then(hits =>\n                hits.forEach(hit => {\n                    const card = new Card(\n                        hit.largeImageURL,\n                        'offer__card',\n                        `${item} ${foodModificator[getIncremNum()]}`,\n                    ).render();\n                    food[i].insertAdjacentHTML('beforeend', card);\n                }),\n            ).catch(err => {\n                throw new Error;\n            })\n        });\n    }\n\n\n    const onOrderBtn = (event, name) => {\n        event.preventDefault();\n        new Popup(name).render();\n    };\n\n    offer.addEventListener('click', event => {\n        const order = document.querySelectorAll('.offer__card_button');\n        let target = event.target;\n        let parent = target.parentElement;\n\n        document.querySelectorAll('.offer__card').forEach((card, i) => {\n\n            if (!target.classList.contains('offer__card_active') && target.nodeName === 'IMG') {\n\n                card.firstElementChild.classList.remove('offer__card_active');\n                parent.classList.add('offer__card_active');\n\n            } else if (target === order[i]) {\n\n                onOrderBtn(event, parent.dataset.product);\n\n            } else {\n\n                card.firstElementChild.classList.remove('offer__card_active');\n\n            }\n        });\n    });\n});\n"],"sourceRoot":""}